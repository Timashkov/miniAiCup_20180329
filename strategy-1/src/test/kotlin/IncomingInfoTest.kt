import data.StepPoint
import org.json.JSONObject
import utils.Logger


class IncomingInfoTest {

    lateinit var mConfig: WorldConfig
    lateinit var mProcessor: Processor
    val mLogger = Logger()

    @org.junit.Before
    fun setUp() {


        val json = JSONObject(
                "{\"FOOD_MASS\":3.7153079922574008,\"GAME_HEIGHT\":990,\"GAME_TICKS\":7500,\"GAME_WIDTH\":990,\"INERTION_FACTOR\":7.4481118195032749,\"MAX_FRAGS_CNT\":8,\"SPEED_FACTOR\":30.638564718161234,\"TICKS_TIL_FUSION\":190,\"VIRUS_RADIUS\":22.694939100384588,\"VIRUS_SPLIT_MASS\":98.782334421476179,\"VISCOSITY\":0.14500014530220559}"
        )
        mConfig = WorldConfig(json)
        mProcessor = Processor(json)

    }

    @org.junit.After
    fun tearDown() {
    }

    @org.junit.Test
    fun testProcessor() {
        var tickData = JSONObject(
                "{\"Mine\":[{\"Id\":\"4\",\"M\":448.08251162687066,\"R\":42.335919105500501,\"SX\":0.66389552386836748,\"SY\":0.90286306095450264,\"X\":502.95740990356347,\"Y\":287.41616852238917}],\"Objects\":[{\"T\":\"F\",\"X\":417,\"Y\":426},{\"T\":\"F\",\"X\":339,\"Y\":308},{\"T\":\"F\",\"X\":368,\"Y\":304},{\"T\":\"F\",\"X\":390,\"Y\":318},{\"T\":\"F\",\"X\":358,\"Y\":293},{\"T\":\"F\",\"X\":664,\"Y\":274},{\"T\":\"F\",\"X\":426,\"Y\":200},{\"T\":\"F\",\"X\":417,\"Y\":361},{\"T\":\"F\",\"X\":573,\"Y\":361},{\"T\":\"F\",\"X\":393,\"Y\":194},{\"T\":\"F\",\"X\":649,\"Y\":347},{\"T\":\"F\",\"X\":355,\"Y\":224},{\"T\":\"F\",\"X\":635,\"Y\":224},{\"Id\":\"505\",\"M\":40,\"T\":\"V\",\"X\":290.3898782007692,\"Y\":402.3898782007692},{\"Id\":\"749\",\"M\":40,\"T\":\"V\",\"X\":368.3898782007692,\"Y\":232.38987820076918},{\"Id\":\"750\",\"M\":40,\"T\":\"V\",\"X\":621.6101217992308,\"Y\":232.38987820076918},{\"Id\":\"751\",\"M\":40,\"T\":\"V\",\"X\":621.6101217992308,\"Y\":757.6101217992308},{\"Id\":\"752\",\"M\":40,\"T\":\"V\",\"X\":368.3898782007692,\"Y\":757.6101217992308},{\"Id\":\"993\",\"M\":40,\"T\":\"V\",\"X\":209.38987820076918,\"Y\":448.3898782007692},{\"Id\":\"994\",\"M\":40,\"T\":\"V\",\"X\":780.6101217992308,\"Y\":448.3898782007692},{\"Id\":\"996\",\"M\":40,\"T\":\"V\",\"X\":209.38987820076918,\"Y\":541.6101217992308}]}"
        )
        var parsed = mProcessor.parseIncoming(tickData)
        mProcessor.analyzeData(parsed, 5325)
        tickData = JSONObject(
                "{\"Mine\":[{\"Id\":\"4.2\",\"M\":224.04125581343533,\"R\":29.936015487264523,\"SX\":0.65267106041752443,\"SY\":0.91191376067746299,\"TTF\":190,\"X\":503.61008096398098,\"Y\":288.32808228306664},{\"Id\":\"4.1\",\"M\":224.04125581343533,\"R\":29.936015487264523,\"SX\":5.2380716449962597,\"SY\":7.3186477878011162,\"TTF\":190,\"X\":503.61008096398098,\"Y\":288.32808228306664}],\"Objects\":[{\"T\":\"F\",\"X\":573,\"Y\":361},{\"Id\":\"505\",\"M\":40,\"T\":\"V\",\"X\":290.3898782007692,\"Y\":402.3898782007692},{\"Id\":\"749\",\"M\":40,\"T\":\"V\",\"X\":368.3898782007692,\"Y\":232.38987820076918},{\"Id\":\"750\",\"M\":40,\"T\":\"V\",\"X\":621.6101217992308,\"Y\":232.38987820076918},{\"Id\":\"751\",\"M\":40,\"T\":\"V\",\"X\":621.6101217992308,\"Y\":757.6101217992308},{\"Id\":\"752\",\"M\":40,\"T\":\"V\",\"X\":368.3898782007692,\"Y\":757.6101217992308},{\"Id\":\"993\",\"M\":40,\"T\":\"V\",\"X\":209.38987820076918,\"Y\":448.3898782007692},{\"Id\":\"994\",\"M\":40,\"T\":\"V\",\"X\":780.6101217992308,\"Y\":448.3898782007692},{\"Id\":\"996\",\"M\":40,\"T\":\"V\",\"X\":209.38987820076918,\"Y\":541.6101217992308}]}"
        )
        parsed = mProcessor.parseIncoming(tickData)
        mProcessor.analyzeData(parsed, 5326)
    }

}

