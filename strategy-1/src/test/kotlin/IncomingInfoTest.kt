import data.StepPoint
import org.json.JSONObject
import utils.Logger


class IncomingInfoTest {

    lateinit var mConfig: WorldConfig
    lateinit var mProcessor: Processor
    val mLogger = Logger()

    @org.junit.Before
    fun setUp() {


        val json = JSONObject(
                "{\"FOOD_MASS\":3.7153079922574008,\"GAME_HEIGHT\":660,\"GAME_TICKS\":7500,\"GAME_WIDTH\":660,\"INERTION_FACTOR\":7.4481118195032749,\"MAX_FRAGS_CNT\":8,\"SPEED_FACTOR\":30.638564718161234,\"TICKS_TIL_FUSION\":190,\"VIRUS_RADIUS\":22.694939100384588,\"VIRUS_SPLIT_MASS\":98.782334421476179,\"VISCOSITY\":0.14500014530220559}"
        )
        mConfig = WorldConfig(json)
        mProcessor = Processor(json)

    }

    @org.junit.After
    fun tearDown() {
    }

    @org.junit.Test
    fun testProcessor() {

        var tickData = JSONObject(
                "{\"Mine\":[{\"R\":21.062868960185813,\"SX\":1.7533379540296299,\"SY\":-1.5855978213158162,\"TTF\":184,\"X\":259.65291363625045,\"Y\":166.82457950917254,\"Id\":\"1.2\",\"M\":110.91111220848974},{\"R\":21.249104659584106,\"SX\":0.8934866115879525,\"SY\":-2.1249059872913003,\"TTF\":184,\"X\":376.3889153034543,\"Y\":189.35037519193037,\"Id\":\"1.1\",\"M\":112.88111220848974}],\"Objects\":[{\"T\":\"F\",\"X\":318,\"Y\":203},{\"T\":\"F\",\"X\":342,\"Y\":203},{\"R\":16.482217744321183,\"T\":\"P\",\"X\":415.13771736144173,\"Y\":113.19249659855201,\"Id\":\"4.1\",\"M\":67.91587544280402},{\"T\":\"V\",\"X\":87,\"Y\":142,\"Id\":\"21\",\"M\":40},{\"T\":\"V\",\"X\":573,\"Y\":142,\"Id\":\"22\",\"M\":40},{\"T\":\"V\",\"X\":573,\"Y\":518,\"Id\":\"23\",\"M\":40},{\"T\":\"V\",\"X\":116,\"Y\":248,\"Id\":\"265\",\"M\":40},{\"T\":\"V\",\"X\":544,\"Y\":412,\"Id\":\"267\",\"M\":40},{\"T\":\"V\",\"X\":116,\"Y\":412,\"Id\":\"268\",\"M\":40},{\"T\":\"V\",\"X\":73,\"Y\":611,\"Id\":\"512\",\"M\":40},{\"T\":\"V\",\"X\":256,\"Y\":196,\"Id\":\"753\",\"M\":40},{\"T\":\"V\",\"X\":404,\"Y\":464,\"Id\":\"755\",\"M\":40}]}"
        )
        var parsed = mProcessor.parseIncoming(tickData)
        mProcessor.analyzeData(parsed, 7588)


        tickData = JSONObject(
                "{\"Mine\":[{\"R\":21.062868960185813,\"SX\":1.7676799901548754,\"SY\":-1.5694371345480038,\"TTF\":183,\"X\":261.4205936264053,\"Y\":165.25514237462454,\"Id\":\"1.2\",\"M\":110.91111220848974},{\"R\":21.249104659584106,\"SX\":0.9191274862855056,\"SY\":-2.1168600180693566,\"TTF\":183,\"X\":377.30804278973983,\"Y\":187.233515173861,\"Id\":\"1.1\",\"M\":112.88111220848974}],\"Objects\":[{\"T\":\"F\",\"X\":318,\"Y\":203},{\"T\":\"F\",\"X\":342,\"Y\":203},{\"R\":16.482217744321183,\"T\":\"P\",\"X\":417.4357490828563,\"Y\":111.37887511063863,\"Id\":\"4.1\",\"M\":67.91587544280402},{\"T\":\"V\",\"X\":87,\"Y\":142,\"Id\":\"21\",\"M\":40},{\"T\":\"V\",\"X\":573,\"Y\":142,\"Id\":\"22\",\"M\":40},{\"T\":\"V\",\"X\":573,\"Y\":518,\"Id\":\"23\",\"M\":40},{\"T\":\"V\",\"X\":116,\"Y\":248,\"Id\":\"265\",\"M\":40},{\"T\":\"V\",\"X\":544,\"Y\":412,\"Id\":\"267\",\"M\":40},{\"T\":\"V\",\"X\":116,\"Y\":412,\"Id\":\"268\",\"M\":40},{\"T\":\"V\",\"X\":73,\"Y\":611,\"Id\":\"512\",\"M\":40},{\"T\":\"V\",\"X\":256,\"Y\":196,\"Id\":\"753\",\"M\":40},{\"T\":\"V\",\"X\":404,\"Y\":464,\"Id\":\"755\",\"M\":40}]}"
        )
        parsed = mProcessor.parseIncoming(tickData)
        mProcessor.analyzeData(parsed, 7589)
    }

}

