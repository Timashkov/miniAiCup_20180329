import data.StepPoint
import org.json.JSONObject
import utils.Logger


class IncomingInfoTest {

    lateinit var mConfig: WorldConfig
    lateinit var mProcessor: Processor
    val mLogger = Logger()

    @org.junit.Before
    fun setUp() {


        val json = JSONObject(
                "{\"FOOD_MASS\":2.3536580928699875,\"GAME_HEIGHT\":990,\"GAME_TICKS\":7500,\"GAME_WIDTH\":990,\"INERTION_FACTOR\":16.959430338008378,\"MAX_FRAGS_CNT\":7,\"SPEED_FACTOR\":59.871023401060022,\"TICKS_TIL_FUSION\":500,\"VIRUS_RADIUS\":28.794270979910788,\"VIRUS_SPLIT_MASS\":63.959702859752433,\"VISCOSITY\":0.12094029875999117}\n"
        )
        mConfig = WorldConfig(json)
        mProcessor = Processor(json)

    }

    @org.junit.After
    fun tearDown() {
    }

    @org.junit.Test
    fun testProcessor() {

        var tickData = JSONObject(
                "{\"Mine\":[{\"Id\":\"4.4\",\"M\":107.04974528741562,\"R\":20.692969365213454,\"SX\":1.6982939033882714,\"SY\":5.2439408285561768,\"TTF\":444,\"X\":663.64404042034846,\"Y\":472.64321614406128},{\"Id\":\"4.3\",\"M\":299.37443407845973,\"R\":34.604880238397577,\"SX\":0.27304191430034785,\"SY\":3.4494753456399749,\"TTF\":444,\"X\":613.81930599488248,\"Y\":488.21055237213932}],\"Objects\":[{\"T\":\"F\",\"X\":682,\"Y\":583},{\"Id\":\"1.5\",\"M\":385.58820003729153,\"R\":39.272799749306976,\"T\":\"P\",\"X\":546.14303349689931,\"Y\":383.70483327782551},{\"Id\":\"1.11\",\"M\":62.463344712139218,\"R\":15.806751052906378,\"T\":\"P\",\"X\":491.66170680527131,\"Y\":448.66220909893048},{\"Id\":\"21\",\"M\":40,\"T\":\"V\",\"X\":59.588541959821576,\"Y\":417.58854195982155},{\"Id\":\"22\",\"M\":40,\"T\":\"V\",\"X\":930.41145804017845,\"Y\":417.58854195982155},{\"Id\":\"23\",\"M\":40,\"T\":\"V\",\"X\":930.41145804017845,\"Y\":572.41145804017845},{\"Id\":\"24\",\"M\":40,\"T\":\"V\",\"X\":59.588541959821576,\"Y\":572.41145804017845},{\"Id\":\"267\",\"M\":40,\"T\":\"V\",\"X\":256.58854195982155,\"Y\":402.58854195982155},{\"Id\":\"268\",\"M\":40,\"T\":\"V\",\"X\":733.41145804017845,\"Y\":402.58854195982155},{\"Id\":\"269\",\"M\":40,\"T\":\"V\",\"X\":733.41145804017845,\"Y\":587.41145804017845},{\"Id\":\"270\",\"M\":40,\"T\":\"V\",\"X\":256.58854195982155,\"Y\":587.41145804017845},{\"Id\":\"511\",\"M\":40,\"T\":\"V\",\"X\":176.58854195982158,\"Y\":431.58854195982155},{\"Id\":\"512\",\"M\":40,\"T\":\"V\",\"X\":176.58854195982158,\"Y\":558.41145804017845}]}"
        )
        var parsed = mProcessor.parseIncoming(tickData)
        mProcessor.analyzeData(parsed, 7588)


//        tickData = JSONObject(
//                "{\"Mine\":[{\"R\":20.99681521105083,\"SX\":-2.304556602866525,\"SY\":-0.4531364079414227,\"TTF\":1069755105,\"X\":22.324004950615926,\"Y\":144.78444013454558,\"Id\":\"1\",\"M\":110.21656225175388}],\"Objects\":[{\"R\":23.732100031610287,\"T\":\"P\",\"X\":104.74932887514845,\"Y\":154.88353625117745,\"Id\":\"4\",\"M\":140.80314297758926},{\"T\":\"V\",\"X\":527,\"Y\":199,\"Id\":\"22\",\"M\":40},{\"T\":\"V\",\"X\":527,\"Y\":461,\"Id\":\"23\",\"M\":40},{\"T\":\"V\",\"X\":133,\"Y\":461,\"Id\":\"24\",\"M\":40},{\"T\":\"V\",\"X\":241,\"Y\":184,\"Id\":\"265\",\"M\":40},{\"T\":\"V\",\"X\":419,\"Y\":184,\"Id\":\"266\",\"M\":40},{\"T\":\"V\",\"X\":419,\"Y\":476,\"Id\":\"267\",\"M\":40}]}"
//        )
//        parsed = mProcessor.parseIncoming(tickData)
//        mProcessor.analyzeData(parsed, 7589)
    }

}

